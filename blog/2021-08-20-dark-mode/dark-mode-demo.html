<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Dark Mode Demo</title>
		<link rel="icon" id="favicon" href="javascript:void(0)" />
		<style>
body {
	background-color: #fff;
	color: #121212;
}
body.scheme-dark {
	background-color: #121212;
	color: #eee;
}
body, html {
	height: 100%;
	margin: 0;
}
main {
	align-items: center;
	display: flex;
	height: 100%;
	justify-content: center;
}
#msg {
	font-family: "Noto Sans", Roboto, "Helvetica Neue", Arial, sans-serif;
	font-size: 48pt;
	font-weight: bold;
}
.control {
	background-color: #121212;
	border-radius: 4px;
	cursor: pointer;
	padding: 4px;
	position: absolute;
	right: 4px;
	top: 4px;
	width: 26px;
}
.hidden {
	display: none;
}
@media screen and (prefers-color-scheme: dark) {
	body.scheme-auto {
		background-color: #121212;
		color: #eee;
	}
}
@media print {
	body {
		background-color: transparent !important;
		color: black !important;
	}
	.control {
		display: none !important;
	}
}
		</style>
	</head>
	<body class="scheme-auto">
		<main>
			<div id="msg">Dark Mode Demo</div>
		</main>
		<div id="scheme-switch" class="control hidden">
			<span id="scheme-switch-dark"><svg width="24" height="24" x="0px" y="0px" viewBox="0 0 512 512"><use xlink:href="#moon"></use></svg></span>
			<span id="scheme-switch-light"><svg width="24" height="24" x="0px" y="0px" viewBox="0 0 512 512"><use xlink:href="#bulb"></use></svg></span>
		</div>
		<div class="hidden">
			<svg xmlns="http://www.w3.org/2000/svg">
				<defs>
					<g id="moon">
						<path fill="#FDE364" d="M503.851,210.204C492.563,120.657,434.38,44.485,355.192,7.235c-11.279-5.306-22.337,7.572-15.47,17.982  c18.48,28.029,30.919,60.278,35.273,94.838c18.733,148.659-106.281,273.673-254.94,254.94c-34.56-4.354-66.81-16.793-94.839-35.273  c-10.41-6.866-23.287,4.191-17.982,15.478c37.25,79.182,113.422,137.364,202.969,148.651  C381.429,525.43,525.429,381.437,503.851,210.204" />
					</g>
					<g id="bulb">
						<path fill="#FFE46A" d="M411.111,183.926c0-87.791-68.91-158.959-153.914-158.959S103.283,96.136,103.283,183.926   c0,39.7,14.093,75.999,37.392,103.856h-0.001l33.666,61.027c8.793,16.28,12.057,26.792,26.792,26.792h109.774   c14.736,0,19.071-11.07,26.792-26.792l36.022-61.027h-0.002C397.017,259.925,411.111,223.626,411.111,183.926z" />
						<path fill="#FFF0B7" d="M112.805,203.285c0-90.721,68.378-165.701,157.146-177.719c-4.391-0.389-8.831-0.599-13.319-0.599   c-85.004,0-153.914,71.169-153.914,158.959c0,28.89,7.469,55.974,20.512,79.319C116.48,244.496,112.805,224.313,112.805,203.285z" />
						<path fill="#FFDA00" d="M411.111,184.266c0-31.445-8.843-60.755-24.097-85.428c3.219,12.726,4.917,25.908,4.917,39.416   c0,104.454-101.138,189.522-227.481,192.967l9.89,17.929c8.793,16.28,12.057,26.792,26.792,26.792h109.774   c14.736,0,19.071-11.07,26.792-26.792l36.022-61.027h-0.002C397.017,260.265,411.111,223.966,411.111,184.266z" />
						<path fill="#FAAF63" d="M321.905,211.203c0.149-0.131,0.297-0.251,0.447-0.395c2.787-2.667,5.082-6.921,3.161-10.867   c-7.879-16.176-31.97-21.308-49.524-15.951c-0.889,0.271-1.751,0.566-2.588,0.885c-9.562-5.583-21.434-6.925-32.001-3.569   c-1.275,0.405-2.503,0.871-3.678,1.394c-5.785-3.38-12.552-5.066-19.294-4.414c-14.112,1.365-26.375,12.81-28.805,26.752   l-1.112,0.688c9.617,15.541,34.93,60.071,36.552,79.233c2.045,24.174,0.002,89.793-0.019,90.453l11.994,0.379   c0.086-2.723,2.086-66.978-0.019-91.844c-0.938-11.087-7.722-28.758-20.164-52.521c-5.807-11.092-11.445-20.83-14.858-26.576   c2.36-7.646,9.61-13.848,17.586-14.619c2.429-0.235,4.893,0.037,7.251,0.729c-0.893,1.147-1.67,2.362-2.32,3.638   c-4.047,7.935-2.356,17.898,3.933,23.176c3.725,3.125,9.137,4.276,14.127,3c4.647-1.188,8.239-4.242,9.854-8.379   c1.451-3.718,1.328-8.01-0.367-12.756c-0.982-2.749-2.359-5.318-4.05-7.655c4.51-0.878,9.225-0.609,13.61,0.744   c-1.715,1.975-3.027,4.173-3.89,6.556c-1.844,5.101-1.029,11.163,2.128,15.822c2.721,4.016,6.856,6.403,11.348,6.551   c0.15,0.005,0.301,0.008,0.45,0.008c3.935,0,7.67-1.692,10.562-4.797c3.397-3.647,5.126-8.71,4.624-13.544   c-0.319-3.073-1.412-6.079-3.172-8.867c12.236-2.223,24.205,1.911,29.383,8.186c-3.125,5.2-9.542,16.11-16.178,28.785   c-12.441,23.764-19.227,41.435-20.164,52.521c-2.104,24.866-0.104,89.121-0.019,91.844l11.994-0.379   c-0.021-0.66-2.064-66.275-0.019-90.453C290.127,267.71,310.781,229.915,321.905,211.203z M241.248,208.032   c-0.279,0.716-1.331,1.035-1.647,1.116c-1.25,0.319-2.665,0.086-3.442-0.565c-2.015-1.691-2.453-5.599-0.957-8.532   c0.463-0.908,1.087-1.774,1.85-2.583c1.611,1.828,2.892,3.926,3.707,6.208C241.424,205.536,241.602,207.125,241.248,208.032z    M273.438,208.686c-0.351,0.375-1.065,0.992-1.839,0.976c-0.831-0.027-1.489-0.819-1.808-1.289   c-0.993-1.467-1.312-3.527-0.776-5.009c0.618-1.71,1.811-3.109,3.203-4.235c1.55,1.751,2.501,3.634,2.688,5.434   C275.05,205.934,274.459,207.59,273.438,208.686z" />
						<path fill="#6B83A5" d="M315.932,402.701H197.897c-6.6,0-12,5.4-12,12v6.957c0,6.6,5.4,12,12,12h38.122   c-11.367,4.229-23.369,14.285-23.369,25.946v4.68c9.123,10.254,17.619,28.081,33.802,28.081h21.89   c12.748,0,21.804-13.762,32.836-28.081v-4.68c0-11.661-11.451-21.717-22.548-25.946h37.302c6.6,0,12-5.4,12-12v-6.957   C327.932,408.101,322.532,402.701,315.932,402.701z" />
						<path fill="#ABBDDB" d="M324.406,402.701H189.423c-6.6,0-12-5.4-12-12v-6.957c0-6.6,5.4-12,12-12h134.983c6.6,0,12,5.4,12,12v6.957   C336.406,397.301,331.006,402.701,324.406,402.701z M317.399,452.616v-6.957c0-6.6-5.4-12-12-12H208.43c-6.6,0-12,5.4-12,12v6.957   c0,6.6,5.4,12,12,12h96.969C311.999,464.616,317.399,459.216,317.399,452.616z" />
					</g>
				</defs>
			</svg>
		</div>
		<script>
(function() {
  "use strict";

  function makeDataURL(foreground, background) {
    const canvas = document.createElement("canvas");
    canvas.height = 32;
    canvas.width = 32;
    const ctx = canvas.getContext("2d");
    ctx.fillStyle = background;
    ctx.fillRect(0, 0, 32, 32);
    ctx.fillStyle = foreground;
    ctx.fillRect(10, 10, 12, 12);
    return canvas.toDataURL("image/png");
  }

  const faviconEle = document.getElementById("favicon");
  const lightDataURL = makeDataURL("#121212", "#fff");
  const darkDataURL = makeDataURL("#eee", "#121212");

  var isDarkScheme = false;
  var isManual = false;
  var query = null;

  function updateIcons() {
    if (isDarkScheme) {
      document.getElementById("scheme-switch-light").classList.remove("hidden");
      document.getElementById("scheme-switch-dark").classList.add("hidden");
      faviconEle.href = darkDataURL;
    } else {
      document.getElementById("scheme-switch-dark").classList.remove("hidden");
      document.getElementById("scheme-switch-light").classList.add("hidden");
      faviconEle.href = lightDataURL;
    }
  }

  function setSchemeFromQuery() {
    if (!isManual) {
      isDarkScheme = query.matches;
      updateIcons();
    }
  }

  function setSchemeManual() {
    isManual = true;
    isDarkScheme = !isDarkScheme;
    updateIcons();
    if (isDarkScheme) {
      document.body.classList.add("scheme-dark");
    } else {
      document.body.classList.remove("scheme-dark");
    }
    document.body.classList.remove("scheme-auto");
  }

  function init() {
    if (window.matchMedia) {
      query = window.matchMedia("(prefers-color-scheme: dark)");
      query.addEventListener("change", setSchemeFromQuery);
      setSchemeFromQuery();
    }
    const switchEle = document.getElementById("scheme-switch");
    switchEle.onclick = setSchemeManual;
    switchEle.classList.remove("hidden");
  }

  init();
})();
		</script>
	</body>
</html>
